<html>
    <head>
        <title>Charcha</title>
      <script src="//cdn.webrtc-experiment.com/RTCMultiConnection.js"></script>
    </head>
    <body>
        <input type=text id="input-text-chat" disabled>
        <button id="openNewSessionButton">Open New Room</button>
        <script>
        
        var connection = new RTCMultiConnection();
        
        // easiest way to customize what you need!
        connection.session = {
            audio: true,
            video: false,
             data: true 
        };
        
        // on getting local or remote media stream
        connection.onstream = function(e) {
            document.body.appendChild(e.mediaElement);
        };
        
        // setup signaling channel
        connection.connect();
        
        // open new session
        document.querySelector('#openNewSessionButton').onclick = function() {
            connection.open();
        };
        
        connection.onopen = function(event) {
            alert('Text chat has been opened between you and ' + event.userid);
            document.getElementById('input-text-chat').disabled = false;
        };
        
        connection.onmessage = function(event) {
            alert('Target user (event.userid) said: ' + event.data);
        };
        
        document.getElementById('input-text-chat').onkeyup = function(e) {
            if(e.keyCode != 13) return; // if it is not Enter-key
            var value = this.value.replace(/^\s+|\s+$/g, '');
            if(!value.length) return; // if empty-spaces
            
            connection.send( value );
            this.value = '';
        };
        
        </script>
    </body>
<!--    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
-->
</html>